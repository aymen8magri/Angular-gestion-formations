<!-- Modal de Connexion -->

<div class="modal-dialog modal-dialog-centered login-pop-form" role="document">
    <div class="modal-content" id="registermodal">
        <div class="modal-header">
            <h4>Connexion</h4>
        </div>
        <div class="modal-body">

            <div class="login-form">
                <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" 
                            formControlName="email"
                            [ngClass]="{'form-control': true, 'error':loginForm.get('email')?.invalid && loginForm.get('email')?.touched }"
                            placeholder="Entrez votre e-mail" required>

                        @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
                            <div class="error-message">
                                @if (loginForm.get('email')?.errors?.['required']) {
                                    <small>L'e-mail est requis.</small>
                                } @else if (loginForm.get('email')?.errors?.['email']) {
                                    <small>Veuillez entrer une adresse e-mail valide.</small>
                                }
                            </div>
                        }
                    </div>

                    <div class="form-group">
                        <label>Mot de passe</label>
                        <input type="password" 
                            formControlName="password"
                            [ngClass]="{'form-control': true, 'error':loginForm.get('password')?.invalid && loginForm.get('password')?.touched }"
                            placeholder="Entrez votre mot de passe" required>

                        @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                            <div class="error-message">
                                @if (loginForm.get('password')?.errors?.['required']) {
                                    <small>L'e-mail est requis.</small>
                                } @else if (loginForm.get('password')?.errors?.['minlength']) {
                                    <small>Le mot de passe doit contenir au moins 6 caractères.</small>
                                }
                            </div>
                        }
                    </div>


                    <!-- Ajout des radio pour choisir le rôle -->
                    <div class="form-group">
                        <label>Choisissez votre rôle</label><br>
                        <input type="radio" formControlName="role" id="stagiaire" name="role" value="stagiaire">
                        <label for="stagiaire">Stagiaire</label><br>
                        <input type="radio" formControlName="role" id="entreprise" name="role" value="entreprise">
                        <label for="entreprise">Entreprise</label>
                    </div>

                    <div class="form-group">
                        <button type="submit" [disabled]="loginForm.invalid" class="btn dark-2 btn-md full-width pop-login">Se connecter</button>
                    </div>

                </form>
            </div>

        </div>
        <div class="modal-footer">
            <div class="mf-link"><i class="ti-user"></i> Pas de compte ? <a routerLink="/register" class="theme-cl">
                    Inscrivez-vous</a></div>
        </div>
    </div>
</div>

<!-- Fin du Modal -->
